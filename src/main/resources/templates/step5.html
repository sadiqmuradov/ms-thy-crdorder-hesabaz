<!DOCTYPE html>
<html th:lang="${#locale.language}" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <link rel="stylesheet" th:href="@{/media/fonts/Rubik_Az/stylesheet.css}">
    <link rel="stylesheet" th:href="@{/media/plugins/niceSelect/nice-select.css}">
    <link rel="stylesheet" th:href="@{/media/css/style.css}">

    <title th:text="#{label.step5.title}">PaşaBank THY Miles & Smiles Kart Sifarişi | Anket Məlumatları</title>
</head>
<body>
    <div class="page-content step-5-content">
        <!-- Header-start -->
        <header class="header-form">
            <div class="container">
                <div class="header-top">
                    <div class="header-top__left-col">
                        <div class="logo">
                            <a href="https://www.pashabank.az/lang,az/" target="_blank" title="Pasha Bank">
                                <picture>
                                    <source srcset="media/img/pashabank_logo_white_375_wm.png" media="(max-width: 639px)">
                                    <img th:src="@{/media/img/pashabank_logo_white.png}" alt="PAŞABank logo">
                                </picture>
                            </a>
                        </div>
                        <div class="logo-thy-miles-smiles">
                            <a href="https://www.milesandsmiles.net/" target="_blank" title="Pasha Bank">
                                <picture>
                                    <source srcset="media/img/thy_miles_smiles_logo_white_375_wm.png" media="(max-width: 639px)">
                                    <img th:src="@{/media/img/thy_miles_smiles_logo_white.png}" alt="Miles&amp;Smiles | Türk Hava Yolları ®">
                                </picture>
                            </a>
                        </div>
                        <div class="hesab-az-logo">
                            <a href="https://hesab.az/" target="_blank">
                                <img th:src="@{media/img/hesab-logo.svg}" alt="hesab.az">
                            </a>
                        </div>
                    </div>
                    <div class="header-top__right-col">
                        <div class="lang header-lang">
                            <b th:if="${lcl == 'az'}">AZ</b>
                            <b th:if="${lcl == 'en'}">EN</b>
                            <b th:if="${lcl == 'ru'}">RU</b>
                            <picture><img th:src="@{/media/img/Icon_Down_1x.png}" alt="dropdown-image"></picture>
                            <div class="other-langs">
                                <a th:if="${lcl == 'az'}" th:href="@{step5(lang=en)}" class="language-link">EN</a>
                                <a th:if="${lcl == 'az'}" th:href="@{step5(lang=ru)}" class="language-link">RU</a>
                                <a th:if="${lcl == 'en'}" th:href="@{step5(lang=az)}" class="language-link">AZ</a>
                                <a th:if="${lcl == 'en'}" th:href="@{step5(lang=ru)}" class="language-link">RU</a>
                                <a th:if="${lcl == 'ru'}" th:href="@{step5(lang=az)}" class="language-link">AZ</a>
                                <a th:if="${lcl == 'ru'}" th:href="@{step5(lang=en)}" class="language-link">EN</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!-- Header-end -->
        <div class="content-inner">
            <div class="container">
                <h1 class="page-heading" th:text="#{label.general.online_application}">Onlayn müraciət</h1>
                <div class="main-block">
                    <div class="steps-all">
                        <div class="steps__item steps__item--success">
                            <span class="steps-item__number">1</span>
                            <span class="steps-item__title" th:text="#{label.general.personal_info}">Şəxsi məlumat</span>
                        </div>
                        <div class="steps__item steps__item--success">
                            <span class="steps-item__number">2</span>
                            <span class="steps-item__title" th:text="#{label.general.address_contact_info}">Ünvan və əlaqə vasitələri</span>
                        </div>
                        <div class="steps__item steps__item--success">
                            <span class="steps-item__number">3</span>
                            <span class="steps-item__title" th:text="#{label.general.tk_no}">TK nömrə</span>
                        </div>
                        <div class="steps__item steps__item--success">
                            <span class="steps-item__number">4</span>
                            <span class="steps-item__title" th:text="#{label.general.required_documents}">Lazımi sənədlər</span>
                        </div>
                        <div class="steps__item steps__item--active">
                            <span class="steps-item__number">5</span>
                            <span class="steps-item__title" th:text="#{label.general.anket_info}">Anket məlumatları</span>
                        </div>
                        <div class="steps__item">
                            <span class="steps-item__number">6</span>
                            <span class="steps-item__title" th:text="#{label.general.card_info}">Kart məlumatları</span>
                        </div>
                        <div class="steps__item">
                            <span class="steps-item__number">7</span>
                            <span class="steps-item__title" th:text="#{label.general.confirmation_of_order}">Məlumatların yoxlanışı</span>
                        </div>
                    </div>
                    <div class="form-wrapper">
                        <h2 class="step-heading" th:text="#{label.general.anket_info}">Anket məlumatları</h2>
                        <form th:action="@{/step5}" th:object="${app}" method="post">
                            <div class="form-groups__row" th:each="crsQuestion, iStat : ${crsQuestionList}">
                                <div class="form-group" th:classappend="${iStat.index &lt; 11} ? 'form-group--full-width' : ''" th:style="${iStat.index == 13 ? 'width: 400px' : ''}">
                                    <label>
                                        <span th:text="${iStat.index + 1} + '.'"></span>
                                        <span th:text="${crsQuestion.question}"></span>
                                    </label>
                                    <div th:if="${iStat.index &lt; 11}" class="checks-group">
                                        <div class="checks-group__item">
                                            <input type="radio" class="form-check-input" th:field="*{anketAnswers[__${iStat.index}__]}" value="1" th:onchange="|toggleAnketDesc(${iStat.index + 1}, 'show')|">
                                            <label class="form-check-label" th:text="#{label.general.yes}">Bəli</label>
                                        </div>
                                        <div class="checks-group__item">
                                            <input type="radio" class="form-check-input" th:field="*{anketAnswers[__${iStat.index}__]}" value="2" th:onchange="|toggleAnketDesc(${iStat.index + 1}, 'hide')|">
                                            <label class="form-check-label" th:text="#{label.general.no}">Xeyr</label>
                                        </div>
                                        <div>
                                            <span th:id="'anketAnswersError' + ${iStat.index + 1}"
                                                  th:if="${#fields.hasErrors('anketAnswers[__${iStat.index}__]')}"
                                                  th:errors="*{anketAnswers[__${iStat.index}__]}" class="inputs-error"></span>
                                        </div>
                                    </div>
                                    <div th:if="${iStat.index &lt; 11}" th:id="'anketDescs' + ${iStat.index + 1}" class="form-group--full-width" th:classappend="${anketAnswers[iStat.index] != 1} ? 'd-none' : ''">
                                        <div th:if="${!#strings.isEmpty(crsQuestion.addquestion)}">
                                            <label th:text="${crsQuestion.addquestion}"></label>
                                            <input type="text" th:field="*{anketDescs[__${iStat.index}__]}" class="form-control">
                                            <span th:if="${#fields.hasErrors('anketDescs[__${iStat.index}__]')}" th:errors="*{anketDescs[__${iStat.index}__]}" class="inputs-error"></span>
                                        </div>
                                    </div>
                                    <select th:if="${iStat.index == 11 or iStat.index == 12}" th:field="*{anketAnswers[__${iStat.index}__]}" class="form-control">
                                        <option th:each="netGrossIncome : ${netGrossIncomesList}"
                                                th:value="${netGrossIncome.id}"
                                                th:text="${netGrossIncome.text}">
                                        </option>
                                    </select>
                                    <select th:if="${iStat.index == 13}" th:field="*{anketAnswers[__${iStat.index}__]}" class="form-control">
                                        <option th:each="sourceOfIncome : ${sourcesOfIncomeList}"
                                                th:value="${sourceOfIncome.id}"
                                                th:text="${sourceOfIncome.text}">
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-groups__row">
                                <div class="form-group form-group--full-width">  
                                    <div class="checkbox">
                                        <input type="checkbox" id="acceptedTerms" name="acceptedTerms" class="form-check-input" th:checked="${app.isAcceptedTerms()}">
                                        <label for="acceptedTerms" th:text="#{label.step5.agreement_terms}">Əlavə etdiyim məlumatın düzgünlüyünü təsdiq edirəm və buna görə şəxsən məsuliyyət daşıyıram.</label>
                                        <span th:if="${#fields.hasErrors('acceptedTerms')}" th:errors="*{acceptedTerms}" class="inputs-error"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="form-groups__row">
                                <div class="form-group form-group--full-width">  
                                    <div class="checkbox">
                                        <input type="checkbox" id="acceptedGsa" name="acceptedGsa" class="form-check-input" th:checked="${app.isAcceptedGsa()}">
                                        <label for="acceptedGsa">
                                            <span th:text="#{label.step5.agreement_gsa}">Ümumi şərtlər toplusu ilə tanış olduğumu təsdiq edirəm.</span>
                                            <a class="form-check-label" href="https://www.pashabank.az/gsa/lang,az/" target="_blank" th:text="#{label.step5.link_gsa}"></a>
                                        </label>
                                        <span th:if="${#fields.hasErrors('acceptedGsa')}" th:errors="*{acceptedGsa}" class="inputs-error"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="buttons-group">
                                <input type="submit" name="back" class="btn btn--light" th:value="#{label.general.back}">
                                <input type="submit" name="next" class="btn" th:value="#{label.general.next}">
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script th:src="@{/media/plugins/niceSelect/jquery.nice-select.js}"></script>
    <script th:src="@{/media/js/script.js}"></script>

    <script>
        function toggleAnketDesc(idx, ind) {
            if (ind === 'show') {
                $('#anketDescs' + idx).removeClass('d-none');
            } else {
                $('#anketDescs' + idx).addClass('d-none');
            }
            $('#anketAnswersError' + idx).text("");
        };
    </script>

</body>
</html>